<!-- index.html – Complete VR build (updated 2025‑07‑28) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Eternal Momentum VR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- A‑Frame + helper libs -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <!-- Runtime -->
  <script type="module" src="vrMain.js"></script>
  <script type="module" src="app.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="Eternal-Momentum-OLD GAME/style.css" />
</head>

<body>
  <!-- Neon‑grid texture source -->
  <canvas id="gridCanvas" width="512" height="512" style="display:none;"></canvas>
  <!-- Console button texture source -->
  <canvas id="buttonCanvas" width="256" height="256" style="display:none;"></canvas>
  <canvas id="settingsCanvas" width="1280" height="960" style="display:none;"></canvas>
  <!-- Stage select panel target -->
  <canvas id="levelSelectCanvas" width="1280" height="960" style="display:none;"></canvas>
  <!-- Telemetry panel target -->
  <canvas id="telemetryCanvas" width="1280" height="960" style="display:none;"></canvas>
  <div id="loadingScreen">
    <div id="loadingProgressContainer">
      <div id="loadingProgressFill"></div>
    </div>
    <p id="loadingStatusText">Initializing Systems...</p>
  </div>

  <div id="homeScreen" style="display:none;">
    <video autoplay muted loop playsinline id="home-video-bg">
      <source src="assets/home.mp4" type="video/mp4">
    </video>
    <div id="homeOverlay">
      <h1 id="gameTitle">ETERNAL MOMENTUM</h1>
      <div id="homeActions">
        <button id="startVrBtn" class="home-btn">AWAKEN</button>
        <button id="continueVrBtn" class="home-btn" style="display:none;">CONTINUE MOMENTUM</button>
        <button id="eraseVrBtn" class="home-btn erase" style="display:none;">SEVER TIMELINE</button>
      </div>
    </div>
  </div>

  <div id="fadeOverlay"></div>

  <!-- Motion permission prompt -->
  <div id="motionPermissionModal">
    <div id="motionPermissionBox">
      <h2>SYNC MOTION DATA?</h2>
      <p>To harmonize your Conduit, we require access to your device's motion sensors.</p>
      <div id="motionPermissionActions">
        <button id="motionAllowBtn">GRANT ACCESS</button>
        <button id="motionDenyBtn" class="btn-modal-close">NOT NOW</button>
      </div>
    </div>
  </div>

  <div id="vrContainer"></div>

  <!-- Off‑screen legacy UI modals – captured to canvas with html2canvas -->
  <div class="vr-source">
    <!-- Level Select -->
    <div id="levelSelectModal" class="modal">
      <div id="modal-content" class="modal-background">
        <button id="loreCodexBtn" class="top-right-btn">LORE CODEX</button>
        <h2 class="modal-title">SELECT STAGE</h2>
        <div id="level-select-list-container">
          <div id="level-select-list"></div>
        </div>
        <div id="stageSelectControls" class="stage-select-actions">
          <button id="prevStageBtn">◀</button>
          <span id="stageSelectStage">STAGE 1</span>
          <button id="nextStageBtn">▶</button>
        </div>
        <div class="stage-select-actions">
          <button id="startStageBtn">Start</button>
          <button id="closeStageSelectBtn" class="btn-modal-close">Close</button>
        </div>
        <div id="modal-actions">
          <button id="arenaBtn">WEAVER'S ORRERY</button>
          <button id="jumpToFrontierBtn">JUMP TO FRONTIER</button>
        </div>
      </div>
    </div>
    <!-- Ascension -->
    <div id="ascensionGridModal" class="modal">
      <div id="ascension-grid-container" class="modal-background">
        <div class="ascension-header">
          <h1>ASCENSION CONDUIT</h1>
          <div class="ap-display-header">
            <span>ASCENSION POINTS</span><span id="ap-total-asc-grid">0</span>
          </div>
        </div>
        <div class="ascension-content"></div>
        <div class="ascension-footer">
          <button id="clearSaveBtn">ERASE TIMELINE</button>
        </div>
      </div>
    </div>

    <!-- Aberration Core -->
    <div id="aberrationCoreModal" class="modal">
      <div id="aberration-core-container" class="modal-background">
        <div class="ascension-header">
          <h1>ABERRATION CORE ATTUNEMENT</h1>
          <div id="aberration-core-equipped-display">
            <span>CURRENTLY ATTUNED</span><span id="aberration-core-equipped-name">None</span>
          </div>
        </div>
        <div id="aberration-core-list-container"></div>
        <div class="ascension-footer">
          <button id="unequipCoreBtn">UNEQUIP CORE</button>
        </div>
      </div>
    </div>

    <!-- Orrery -->
    <div id="orreryModal" class="modal">
      <div id="orrery-modal-content" class="modal-background">
        <div class="ascension-header">
          <h1>THE WEAVER'S ORRERY</h1>
          <div class="ap-display-header">
            <span>ECHOES OF CREATION</span><span id="orrery-points-total">0</span>
          </div>
        </div>

        <div id="orrery-main-content">
          <div id="orrery-boss-list-container"></div>
          <div id="orrery-selection-container">
            <h3>TIMELINE ROSTER</h3>
            <div id="orrery-selection-display"></div>
            <div id="orrery-cost-display">
              <span>ECHOES SPENT: </span><span id="orrery-current-cost">0</span>
            </div>
          </div>
        </div>

        <div class="ascension-footer">
          <button id="orrery-reset-btn">CLEAR ROSTER</button>
          <div><button id="orrery-start-btn" class="disabled">FORGE TIMELINE</button></div>
        </div>
      </div>
    </div>

    <!-- Boss Info -->
    <div id="bossInfoModal" class="modal">
      <div id="bossInfoModalBox" class="modal-background">
        <h2 id="bossInfoModalTitle"></h2>
        <div id="bossInfoModalContent"></div>
      </div>
    </div>

    <!-- Settings -->
    <div id="settingsModal" class="modal">
      <div id="settings-container" class="modal-background">
        <h2>Comfort Settings</h2>
        <label>Turn Speed
          <input id="turnSpeedRange" type="range" min="0.5" max="3" step="0.1">
        </label>
        <label>Vignette Intensity
          <input id="vignetteRange" type="range" min="0" max="1" step="0.05">
        </label>
        <label>High Contrast HUD
          <input id="highContrastToggle" type="checkbox">
        </label>
        <label>Music Volume
          <input id="musicVolumeRange" type="range" min="0" max="1" step="0.05">
        </label>
        <label>SFX Volume
          <input id="sfxVolumeRange" type="range" min="0" max="1" step="0.05">
        </label>
        <label>Turn Style
          <select id="turnStyleSelect">
            <option value="smooth">Smooth</option>
            <option value="snap">Snap</option>
          </select>
        </label>
        <label>Enable Telemetry
          <input id="telemetryToggle" type="checkbox">
        </label>
        <p id="privacyNote" style="font-size:0.8em; opacity:0.8;">Enabling records anonymous performance data locally only.</p>
      </div>
    </div>

    <!-- Telemetry Logs -->
    <div id="telemetryModal" class="modal">
      <div id="telemetry-modal-content" class="modal-background">
        <h2>Performance Logs</h2>
        <pre id="telemetryModalContent"></pre>
      </div>
    </div>
  </div>
</body>
</html>
